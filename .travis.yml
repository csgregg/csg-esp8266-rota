language: python
python:
- '3.8'
sudo: false
cache:
  directories:
  - "~/.platformio"
env:
  matrix:
  - PLATFORMIO_CI_SRC=src/
  global:
  - secure: Z3W/djAfUaopwqDo952NMdwAP3UycYiz7lQEijY66BnYgeuaV6Ibk8zI1mSOAH5lFNQU4JR4sNexzSsQiaBapnaZZTNW07ouervStuPmDrZ9rA6VLDbWhn2ONxM1kmqbbM4vGlsyHHfpF43P19lIcuyWw4EXw9CRWW2OUlHiMBFlAdR3qbAVFE46CdqCIpeMPVJXXP+UzlR52oMNRa1cY9CQpwruuNyQDTfTR75ULArwHFjHMJk7H18ZjoiwdrU+I8NqBD6WIb0xZgo7SnAED/itPMIrxZ3g6EbRkHDYZvgKtp9kayA28HZSn/mao0Bzb4sFlTVoxtoiHCfe8T2LEKpZP2irOlfrYtZHCiioI7AxaX1K4mzTT2dtUD5u6DE1JH8r/JiEpIM9QZ7ZXynHA7aHX6DrOEMHzjZ+am6wa5WdKtjdS06Ci7VsSiN5o17pTfwsEaG0eWGN9JoJwU/JZIbRJmy7zg8IL7ECHBysRaDbCYc0r1Qt0etkdUV4KYe1IliSPkI5jTBOPna1UVsyzNf4daPSbGz2sBGp2EZ+CtfbHolA96N5fcl0klH1LlflSNPlq3UK7jKLwXpdwXVQlxfkN3w78gKH2WzoocbUBWiyuC42+gwHT9sev57Z4F9sGMpXxBKLWO3Tk4f9p4vD5hwcdK2fjNYG+y4axcYpAbk=
  - secure: ZSK4pt2Xn90xY5ymlOvFdCeOUUwHNTDUAiKXK0OqZ1JWzUAHmIohQTh7Jbiqw2dXIdm3TOecs4vtAjYbpNjIhGmTxjtLOLBs/a9ogxIU8QUvYlpDq30h5xoQpIrGtAoJVG2NjyUL/r5FQ958i4tWCGgRSdJwygQj46/VsuQuDLbCFcuRIiTEgWJk4yUlTjbzJGcXyTVWskU4RQljItEuqlPNu6Ypy5Y0+7F99LURL+SkhJxTq+/2dhBD8Tj78vlhRbn7fraCxO3nz/y+7r5Pmnq0qFcx+MibkHSHE4nND0kQNlbau4+vlM6zYI7bbf0WLrhk2b5n75XxVdumr/xirZ1Fsl7XgrA09POo9KbsEoMrxQYawsejU6tmeVIsq/8cNAylIFF4K/1karrng+a/P7IivEA6v8JA/J/IAGzjcmH7lltEanOOXdhwMWgvYHRIYRO/+qQ0xJNU3ez2f1OhWGi9eZmMGjv/e1V0fWGJK1NPoU2j7J/5fZF+jykDmahNfHOMzNTcE9XZiidAWK5sR5lVXyISETJJYjv5ppzecB5ojo3S4eCIeHRctjHdfijuinfz6hZzYYHAbLijHeTHOkSZILiTxsAarEv6rktnlxhQMiFD1qsnqNUNPoC/mpMhoiRkDhpZEtIS1M+kdwjBkyviyz2NGtkS31ToGbSJlU4=
install:
- pip install -U platformio
- platformio lib install WiFiManager
- platformio lib install ArduinoJson
script:
- platformio run -e csg-esp8266-rota-travis
- platformio run -t buildfs -e csg-esp8266-rota-travis
deploy:
  provider: releases
  overwrite: true
  skip_cleanup: true
  on:
    repo: csgregg/csg-esp8266-rota
    all_branches: true
    condition: "$TRAVIS_TAG =~ ^[0-9]+\\.[0-9]+\\.[0-9]+$"
  api_key:
    secure: TpxjT3CKVLiplHaZLzRyNaFi9IfG4tI+b5zhQvUA4xnzoJWYCtKr8DVe22yNdEcze8Z2KO9KkC4UCcTTt6ZVQLMZSst/SA2/yiwbvKbHSP6Ise27tTgg1j3G9Tzb4R2oDyv7DHutd2lRJfxUzhPsS1ZvUvPyjyiZjqy4/vygMjr0BBbP8rysfGzCvUy+LF09cFhYCT0Q1+Ua+me8WnwO5asoAeR0fhMDxNw4LLmJj/V5EQ4pTLGSyuNbQl/8IIQ6CECzyP0CeYUaIwEierPdgen1HlzOzmcfU7BBt82dB4DTndJryERa0gGYL2OSvNa9fr0rYtMoOT5bQBYXipoenGkNdlJQnVL7Lzy/Veqqi9Jy4es8WPqy7bFZZQ2W2w52eorr0fL38+2KGahkr7U3PMGaS2D4/HgYEgruJwkIMHz2pOau8uWZyq8+76Wfb14mhLaYzetie+/B7/feFdgQDOFNWU/SduIWlOTDCnMc5vAwCAI7u7BHU7e/SNicxQGptw9d8gOLWuEAysxzQbjd+DdYEZj08GVIeHCd6WqM24SCBGey58ehM3Xnhi1T1wWexYB8KaWQG0hBJv76cPwib3LmF1YXlesRCCI6N0fMBMIsgNEBZbfS7KsrSDAK/x5zgpN9WJjLn1Kr/wi+68b/Ol5hHISOH4VIPunKEbM4SLk=
  file_glob: true
  file: ".pio/build/csg-esp8266-rota-travis/*.bin"
